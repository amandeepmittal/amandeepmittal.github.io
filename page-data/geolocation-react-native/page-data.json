{"componentChunkName":"component---src-templates-post-js","path":"/geolocation-react-native","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"Using Geolocation in React Native","date":"September 30, 2018","author":"Aman Mittal","banner":null,"slug":"geolocation-react-native","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"geolocation-react-native\",\n  \"date\": \"2018-09-30T00:00:00.000Z\",\n  \"title\": \"Using Geolocation in React Native\",\n  \"categories\": [\"react native\"],\n  \"description\": \"Understand how to access Permissions and use Geolocation in your React Native project.\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"React Native takes advantage of Geolocation API that is by default accessible in the web. This API returns different methods such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getCurrentPosition\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"watchPosition\"), \" which are available in React Native as polyfill. To demonstrate how to use it in a React Native app we will integrate it using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-native-cli\"), \".\")), mdx(\"h2\", null, \"Getting Started\"), mdx(\"p\", null, \"Using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-native-cli\"), \" means there are no templates and only little boilerplate code to get started. We will generate a project using the following command. If you do not have it installed in your local machine, please use the first command mentioned below.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"# to install the cli\\nnpm install -g react-native-cli\\n\\n# to scafold an RN project\\nreact-native init geo-example\\n\")), mdx(\"p\", null, \"So once the project directory is generated, traverse into it and run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm start\"), \" to see if everything is installed correctly. If you are on Mac, you can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ios\"), \" simulator to verify. For Windows plus other linux distro users, android emulator is your friend.\"), mdx(\"h2\", null, \"Accessing Geolocation API\"), mdx(\"p\", null, \"The Geolocation API exists as a global object called navigator object in React Native, just like the web. It is accessible via navigator.geolocation in our source code and there is no need to import it.\"), mdx(\"p\", null, \"For our demonstration purposes, we will be using getCurrentPosition method from the geolocation API. This method allows a mobile app to request a user's location and accepts three parameters: success callback, error callback and a configuration object in the last.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"navigator.geolocation.getCurrentPosition(\\n  position => {\\n    const location = JSON.stringify(position)\\n\\n    this.setState({ location })\\n  },\\n  error => Alert.alert(error.message),\\n  { enableHighAccuracy: true, timeout: 20000, maximumAge: 1000 }\\n)\\n\")), mdx(\"p\", null, \"The callback above has a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"position\"), \" argument that is an object with the following properties if executeed without any errors.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"timestamp\\\": 1533729980953.91\\n  \\\"coords\\\": {\\n    \\\"accuracy\\\": 5,\\n    \\\"altitude\\\": 0,\\n    \\\"altitudeAccuracy\\\": -1,\\n    \\\"heading\\\": -1,\\n    \\\"latitude\\\": 37.785834,\\n    \\\"longitude\\\": -122.406417,\\n    \\\"speed\\\": -1\\n  }\\n}\\n\")), mdx(\"p\", null, \"We will modify \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"App.js\"), \" in our react-native project to get started. We start by defining a basic class component that displays the text \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Find My Coords?\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React, { Component } from 'react'\\nimport { View, Text } from 'react-native'\\n\\nexport default class App extends Component {\\n  render() {\\n    return (\\n      <View>\\n        <Text>Find My Coords?</Text>\\n      </View>\\n    )\\n  }\\n}\\n\")), mdx(\"h2\", null, \"Implmenting Geolocation API\"), mdx(\"p\", null, \"Now, let us implement the Geolocation API function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getCurretPosition\"), \" in our app. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Open App.js\"), \" and write the following code.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React, { Component } from 'react'\\nimport {\\n  Platform,\\n  StyleSheet,\\n  Text,\\n  View,\\n  Alert,\\n  TouchableOpacity\\n} from 'react-native'\\n\\nexport default class App extends Component {\\n  state = {\\n    location: null\\n  }\\n\\n  findCoordinates = () => {\\n    navigator.geolocation.getCurrentPosition(\\n      position => {\\n        const location = JSON.stringify(position)\\n\\n        this.setState({ location })\\n      },\\n      error => Alert.alert(error.message),\\n      { enableHighAccuracy: true, timeout: 20000, maximumAge: 1000 }\\n    )\\n  }\\n\\n  render() {\\n    return (\\n      <View style={styles.container}>\\n        <TouchableOpacity onPress={this.findCoordinates}>\\n          <Text style={styles.welcome}>Find My Coords?</Text>\\n          <Text>Location: {this.state.location}</Text>\\n        </TouchableOpacity>\\n      </View>\\n    )\\n  }\\n}\\n\")), mdx(\"p\", null, \"We start be importing TouchableOpcaity. It is a wrapper that responds accurately to user touches. In a react-native mobile app, you will be making use of them quite often. Think of it as a button in a web application. This newly imported wrapper accepts an onPress prop that is going to trigger the function defined as in the value, in our case \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"findCoordinates\"), \".\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"findCoordinates\"), \" holds the logic of fetching a user's location. We are also using the local state to display coordinates from the data provided to us by position object. The text \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Find My Coords?\"), \"now becomes clickable.\"), mdx(\"p\", null, \"You define the following styles too.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const styles = StyleSheet.create({\\n  container: {\\n    flex: 1,\\n    justifyContent: 'center',\\n    alignItems: 'center',\\n    backgroundColor: '#F5FCFF'\\n  },\\n  welcome: {\\n    fontSize: 20,\\n    textAlign: 'center',\\n    margin: 10\\n  },\\n  instructions: {\\n    textAlign: 'center',\\n    color: '#333333',\\n    marginBottom: 5\\n  }\\n})\\n\")), mdx(\"p\", null, \"However, this will not work as expected. We need to set permissions to access a user's location. Also, in real time you will have to ask for permissions. Getting hands dirty now on this will benefit you. This is our next step.\"), mdx(\"h2\", null, \"Asking for Permissions\"), mdx(\"p\", null, \"In \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"iOS\"), \", geolocation is enabled by default when a project is created using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-native-cli\"), \". To use it, you just need to include a key called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<key>NSLocationWhenInUseUsageDescription</key>\"), \" in info.plist which is inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ios/findCoordsApp directory\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<!DOCTYPE plist PUBLIC \\\"-//Apple//DTD PLIST 1.0//EN\\\" \\\"http://www.apple.com/DTDs/PropertyList-1.0.dtd\\\">\\n<plist version=\\\"1.0\\\">\\n<dict>\\n    <key>CFBundleDevelopmentRegion</key>\\n    <string>en</string>\\n    <key>CFBundleDisplayName</key>\\n    <string>findCoordsApp</string>\\n    [..]\\n    <key>NSLocationWhenInUseUsageDescription</key>\\n    <string></string>\\n    <key>NSAppTransportSecurity</key>\\n    <!--See http://ste.vn/2015/06/10/configuring-app-transport-security-ios-9-osx-10-11/ -->\\n  [...]\\n</dict>\\n</plist>\\n\")), mdx(\"p\", null, \"For \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"android\"), \", we need to add the following line in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"android/app/src/AndroidManifest.xml file\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<uses-permission android:name=\\\"android.permission.ACCESS_FINE_LOCATION\\\" />\\n\")), mdx(\"h2\", null, \"Wrapping Up\"), mdx(\"p\", null, \"Now if you run your application you will see the following screen.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://d33wubrfki0l68.cloudfront.net/322265a987e63bce9d3a6b5e9e77677d2d955738/2b3f2/images/react/geolocation-react-native/rn-geolocation-1-defualt-screen.png\",\n    \"alt\": \"ss1\"\n  }))), mdx(\"p\", null, \"Click on the text and you will be prompted to ask whether to allow the application to request for user\\u2019s location or not.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://d33wubrfki0l68.cloudfront.net/ae2a364e23ac372ad95143ca72d6eff7df583b41/8ce35/images/react/geolocation-react-native/rn-geolocation-2-ask-permissions.png\",\n    \"alt\": \"ss2\"\n  }))), mdx(\"p\", null, \"If you press allow, you will see the following result.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://d33wubrfki0l68.cloudfront.net/a949d3877e24bd5b71fb5c332dcc444ecb937e67/2febb/images/react/geolocation-react-native/rn-geolocation-3-result.png\",\n    \"alt\": \"ss3\"\n  }))), mdx(\"p\", null, \"If you want to learn more about working with Geolocation API in a React Native application, please go through the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://facebook.github.io/react-native/docs/geolocation\"\n  }), \"official\"), \" documentation.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://alligator.io/react/geolocation-react-native/\"\n  }), \"Originally published at Alligator.io\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"9849cf08-b02b-5537-b5ad-78a69eddd283","prev":{"id":"d9d8ebdd-348c-5c9f-8a1b-eb073dd45ded","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"In this article, I will describe how to take an existing Web Application that is build using MongoDB, ExpressJS,  Node.js , and  React  (often called as MERN stack) on a deployment service like Heroku. If you have an existing application built using…","fields":{"title":"Deploy a MERN stack app on Heroku","slug":"deploy-a-mern-stack-app-on-heroku","date":"2018-10-12T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"88d5b775-bf89-5f10-be2f-0f321b6966d1","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"What is used to change the state of a React component?\nsetState() and forceUpdate(). Both forceUpdate() and setState() are called within a React Component. Both of these functions tell React to re-render the component. What is Virtual DOM in ReactJS…","fields":{"title":"ReactJS Interview Questions","slug":"reactjs-interview-questions","date":"2018-09-29T00:00:00.000Z"},"code":{"scope":""}}}}}