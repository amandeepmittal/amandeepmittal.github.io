{"componentChunkName":"component---src-templates-post-js","path":"/build-a-twitter-clone-server-with-apollo-graphql-nodejs","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"Build a Twitter Clone Server with Apollo, GraphQL, Nodejs, and Crowdbotics","date":"June 13, 2019","author":"Aman Mittal","banner":null,"slug":"build-a-twitter-clone-server-with-apollo-graphql-nodejs","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"build-a-twitter-clone-server-with-apollo-graphql-nodejs\",\n  \"date\": \"2019-06-13T00:00:00.000Z\",\n  \"title\": \"Build a Twitter Clone Server with Apollo, GraphQL, Nodejs, and Crowdbotics\",\n  \"categories\": [\"nodejs, graphql\"],\n  \"description\": \"Efficiently build a Twitter clone server from scratch that implements GraphQL as the query language to create the API.\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/06/twitter-clone-apollo-graphql.jpg\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"In the last few years, GraphQL becomes a popular choice to build an API. It serves a great alternative to the REST APIs approach. Not only it is an open source application-layer query language, in comparison to REST, GraphQL fulfills the approach that a client request's only the desired set of information from the server in a single request.\"), mdx(\"p\", null, \"In this tutorial, you will be building a server using Node.js, Express and Apollo server library. You will learn how to efficiently build a server from scratch that implements GraphQL as the query language to create the API. We will be using MongoDB to create a local instance of the database and store the application data.\"), mdx(\"p\", null, \"To learn more about the basics of GraphQL, how it differs from REST, its building blocks like schema, resolvers, queries, and mutations, please refer to the previous post \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"https://medium.com/crowdbotics/creating-a-graphql-server-with-nodejs-ef9814a7e0e6\"\n  }), \"Creating a GraphQL Server with Nodejs\")), \". If you have an idea of what they are, you can continue to read this tutorial.\"), mdx(\"p\", null, \"TLDR;\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Requirements\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Getting Started\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Running your first GraphQL server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Adding a Mongoose Schema\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to define GraphQL Types, Queries and Mutations\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Real-time Database Updates with GraphQL API\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Conclusion\")), mdx(\"h2\", null, \"Requirements\"), mdx(\"p\", null, \"In order to follow this tutorial, you are required to have installed the following on your local machine:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Nodejs \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"v8.x.x\"), \" or higher installed along with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"npm/yarn\"), \" as the package manager\")), mdx(\"h2\", null, \"Getting Started\"), mdx(\"p\", null, \"Create a new empty directory and initialize it with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file by running the following commands from a terminal window.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"# create new directory\\nmkdir twitter-clone-apollo-server\\n\\n# traverse inside the directory\\ncd twitter-clone-apollo-server\\n\\n# initialize the package.json file\\nnpm init  --yes\\n\")), mdx(\"p\", null, \"The last command will create a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file. We are going to build an integrated server using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://expressjs.com/\"\n  }), \"Expressjs\"), \" and Apollo server.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Wait, what is an Apollo Server?\"))), mdx(\"p\", null, \"The Apollo Server is the server part of GraphQL where you manage and define a GraphQL API and handle responses that are sent back to the client in response to a network request.\"), mdx(\"p\", null, \"When it comes to building a GraphQL API using Apollo on the server, there are two ways you can do that. One is called \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"standalone\"), \" which is irrespective of the server-side web framework (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"such as Express, Koa, Hapi and so on\"), \") using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apollo-server\"), \" library. This package is kept library-agnostic, so it is possible to connect it with a lot of third-party libraries in client and server applications.\"), mdx(\"p\", null, \"Another way is to use the community maintained packages such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apollo-server-express\"), \". Most popular HTTP Node.js frameworks are having their own community packages that you can check \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/apollographql/apollo-server/tree/master/packages\"\n  }), \"here\"), \". We are going to leverage this approach.\"), mdx(\"p\", null, \"Run the following command to install the dependencies.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install --save express apollo-server-express graphql\\n\")), mdx(\"p\", null, \"To verify if these dependencies are installed, open \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file in your favorite code editor and you will get a similar result like below.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"name\\\": \\\"twitter-clone-apollo-server\\\",\\n  \\\"version\\\": \\\"0.0.1\\\",\\n  \\\"description\\\": \\\"\\\",\\n  \\\"main\\\": \\\"index.js\\\",\\n  \\\"scripts\\\": {\\n    \\\"test\\\": \\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\"\\n  },\\n  \\\"keywords\\\": [],\\n  \\\"author\\\": \\\"Aman Mittal <amandeepmittal@live.com> (www.amanhimself.me)\\\",\\n  \\\"license\\\": \\\"MIT\\\",\\n  \\\"dependencies\\\": {\\n    \\\"apollo-server-express\\\": \\\"^2.5.0\\\",\\n    \\\"express\\\": \\\"^4.17.0\\\",\\n    \\\"graphql\\\": \\\"^14.3.0\\\"\\n  }\\n}\\n\")), mdx(\"h2\", null, \"Running your first GraphQL server\"), mdx(\"p\", null, \"To understand how Apollo Server works, let us create a small bare minimum GraphQL server with the Express framework. Please note that, if you already know how to integrate Apollo server with express and create a hello world example, you are free to skip this section and move on to the next one.\"), mdx(\"p\", null, \"At the root of your project, create a new file: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" with the following code. We start by requiring the required dependencies in order to create this server and make it work.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const express = require('express')\\nconst { ApolloServer, gql } = require('apollo-server-express')\\n\")), mdx(\"p\", null, \"Then define some constants such as for an instance of the Express application, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"app\"), \" and a port number where the local instance of the server is going to run. Note that, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"port\"), \" is currently using an environment value plus the default value of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"5000\"), \" as the local port number if there is not environment value provided via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"process.env.PORT\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const app = express()\\nconst port = process.env.PORT || 5000\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"process.env\"), \"global variable is injected by the Node at runtime for your application to use and it represents the state of the system environment your application is in when it starts.\"), mdx(\"p\", null, \"Next, we define a basic schema. A \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"schema\"), \" in GraphQL is defined at the server in the form of objects. Each object corresponds to data types such that they can be queried upon. This object type has a name and fields. Like the below snippet, there is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hello\"), \" which is of type string.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const typeDefs = gql`\\n  type Query {\\n    hello: String\\n  }\\n`\\n\")), mdx(\"p\", null, \"There are pre-defined scalar types in GraphQL like the string in the above snippet. Visit this \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"https://graphql.org/learn/schema/\"\n  }), \"link\")), \" to read more about them. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Queries\"), \" are what you use to make a request to a GraphQL API.\"), mdx(\"p\", null, \"In order to execute this query, you need a resolver. Resolvers are the link between the schema and the data. They are the functions that contain the logic behind a query or mutation. They are used to retrieve data and return it on the relevant client request.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const resolvers = {\\n  Query: {\\n    hello: () => 'Hello world!'\\n  }\\n}\\n\")), mdx(\"p\", null, \"In the above snippet, we are defining a resolver that will return the string \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello World\"), \" on querying the server. If you have built servers before using Express, you can think of a resolver as a controller where each controller is built for a specific route.\"), mdx(\"p\", null, \"Lastly, we need to use a middleware function from the Apollo Server Express library to instantiate the GraphQL API.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const server = new ApolloServer({ typeDefs, resolvers })\\n\\nserver.applyMiddleware({ app })\\n\")), mdx(\"p\", null, \"Here is the complete code for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" file.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const express = require('express')\\nconst { ApolloServer, gql } = require('apollo-server-express')\\n\\nconst app = express()\\nconst port = process.env.PORT || 5000\\n\\nconst typeDefs = gql`\\n  type Query {\\n    hello: String\\n  }\\n`\\n\\nconst resolvers = {\\n  Query: {\\n    hello: () => 'Hello world!'\\n  }\\n}\\n\\nconst server = new ApolloServer({ typeDefs, resolvers })\\n\\nserver.applyMiddleware({ app })\\n\\napp.listen(port, () =>\\n  console.log(\\n    `\\uD83D\\uDE80 Server ready at http://localhost:${port}${server.graphqlPath}`\\n  )\\n)\\n\")), mdx(\"p\", null, \"Now, go back to the terminal window and run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node index.js\"), \" command to trigger the server up and running. Visit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:5000/graphql\"), \" in a browser window to see that API endpoint in action. Apollo comes with a default playground in order to test the API.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss1-4.png\",\n    \"alt\": \"ss1\"\n  }))), mdx(\"h2\", null, \"Adding a Mongoose Schema\"), mdx(\"p\", null, \"Let us mongoose to create a MongoDB based database model inside the Express server app. To proceed, you will have to install the dependency first. Go to your terminal window, terminate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node index.js\"), \" command first and then run the following.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install -S mongoose\\n\")), mdx(\"p\", null, \"Once this dependency is installed, create a new folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"models\"), \". Inside it, create a new file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TweetModel.js\"), \". This will be responsible for holding the mongoose schema. For those of who do not know what mongoose, well, it is an ORM (object relation mapper) that helps the server app written in Node.js/Expressjs to communicate with the MongoDB database.\"), mdx(\"p\", null, \"Mongoose allows you to define objects with a strongly typed schema that is mapped as a MongoDB collection. This schema architecture allows us to provide an organized shape to the document inside the MongoDB collection where the data is stored.\"), mdx(\"p\", null, \"Start by importing the dependency at the top of the file and then connect the ORM to a local instance of the MongoDB database in the form of a URI: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongodb://localhost:27017/twitter\"), \". The port \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"27017\"), \" is the default port number where MongoDB runs on your local dev machine irrespective of the operating system you are using. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/twitter\"), \" in the end is just the name of the database instance. You can name it anything. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongoose.connect()\"), \" the function takes this URI as the first argument.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"To learn more about how to create and use MongoDB in the cloud using MongoDB atlas, read our earlier post \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://medium.com/crowdbotics/how-to-build-a-serverless-backend-with-aws-lambda-and-nodejs-e0d1257086b4\"\n  }), \"here\"), \".\")), mdx(\"p\", null, \"Open \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TweetModel.js\"), \" file and add the following.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const mongoose = require('mongoose')\\n\\nmongoose.Promise = global.Promise\\nmongoose.connect('mongodb://localhost:27017/twitter', {\\n  useNewUrlParser: true\\n})\\n\\nconst Schema = mongoose.Schema\\n\\nconst tweetSchema = new Schema({\\n  tweet: String,\\n  author: String\\n})\\n\\nconst TweetModel = mongoose.model('Tweet', tweetSchema)\\n\")), mdx(\"p\", null, \"Notice the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tweetSchema\"), \" object. It only contains three fields at the moment. The whole \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tweet\"), \" as a string, and the name of the author who tweets. It is important to take notice of this schema, later, when you are going to create GraphQL queries, this is the same schema pattern you will have to follow.\"), mdx(\"p\", null, \"Now, let us define the CRUD operations that this current Tweet model is going to perform on the MongoDB instance. Add the below snippet of code to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TweetModel.js\"), \" after you have defined the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TweetModel\"), \" itself.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"export default {\\n  getTweets: () => TweetModel.find().sort({ _id: -1 }),\\n  getTweet: _id => TweetModel.findOne({ _id }),\\n  createTweet: args => TweetModel(args).save(),\\n  deleteTweet: args => {\\n    const { _id } = args\\n\\n    TweetModel.remove({ _id }, error => {\\n      if (error) {\\n        console.log('Error Removing: ', error)\\n      }\\n    })\\n\\n    return args\\n  },\\n  updateTweet: args => {\\n    const { _id, tweet } = args\\n\\n    TweetModel.update(\\n      { _id },\\n      {\\n        $set: { tweet }\\n      },\\n      { upsert: true },\\n      error => {\\n        if (error) {\\n          console.log('Error Updating: ', error)\\n        }\\n      }\\n    )\\n\\n    args.author = 'User123' // temporary user\\n\\n    return args\\n  }\\n}\\n\")), mdx(\"p\", null, \"Using these functions that are defined in the above code snippet, it will be possible to perform CRUD operations with the MongoDB database. These functions perform all sort of functions like getting a tweet by its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \", getting all tweets, creating a new tweet, and updating and deleting a specific tweet. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" to each tweet document is going to be generated automatically by the MongoDB database. Each of these function is taking an argument by default and that is the name of the author of the tweet. To keep this demo approachable and bare minimum, the author name right now is hard coded.\"), mdx(\"h2\", null, \"How to define GraphQL Types, Queries and Mutations\"), mdx(\"p\", null, \"To define queries, mutations, and resolvers, create a new folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"api\"), \". Inside this folder create two new files: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Types.js\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Resolvers.js\"), \".\"), mdx(\"p\", null, \"Open \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Types.js\"), \" file and add the following snippet to add the type of the individual tweet based on the mongoose schema and our first mutation to create a new tweet.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const { gql } = require('apollo-server-express')\\n\\nconst typeDefs = gql`\\n  # Type(s)\\n\\n  type Tweet {\\n    _id: String\\n    tweet: String\\n    author: String\\n  }\\n\\n  # Query(ies)\\n  type Query {\\n    getTweet(_id: String): Tweet\\n    getTweets: [Tweet]\\n  }\\n\\n  # Mutation(s)\\n\\n  type Mutation {\\n    createTweet(tweet: String, author: String): Tweet\\n\\n    deleteTweet(_id: String): Tweet\\n\\n    updateTweet(_id: String!, tweet: String!): Tweet\\n  }\\n`\\n\\nmodule.exports = typeDefs\\n\")), mdx(\"p\", null, \"In the above snippet, we define the type of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Tweet\"), \" that will be used in every query and mutation. We are using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gql\"), \" for the graphql template literal. You can comment inside the GraphQL template literal using a hash \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#\"), \". Now open up the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Resolvers.js\"), \" file and add the following.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const TweetModel = require('../models/TweetModel')\\n\\nconst resolvers = {\\n  Query: {\\n    getTweet: _id => TweetModel.getTweet(_id),\\n\\n    getTweets: () => TweetModel.getTweets()\\n  },\\n\\n  Mutation: {\\n    createTweet: (_, args) => TweetModel.createTweet(args),\\n\\n    deleteTweet: (_, args) => TweetModel.deleteTweet(args),\\n\\n    updateTweet: (_, args) => TweetModel.updateTweet(args)\\n  }\\n}\\n\\nmodule.exports = resolvers\\n\")), mdx(\"p\", null, \"In the above file, start by importing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TweetModel\"), \" since it will be used to extend GraphQL queries and mutations (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"defined above\"), \") to communicate with the MongoDB database in real time.\"), mdx(\"p\", null, \"Currently, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" file contains the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"typeDefs\"), \" and resolver from the previous hello world example. Let us import these two files from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"api/\"), \" directory to replace them.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const express = require('express')\\nconst { ApolloServer } = require('apollo-server-express')\\n\\nconst typeDefs = require('./api/Types')\\nconst resolvers = require('./api/Resolvers')\\n\\nconst app = express()\\nconst port = process.env.PORT || 5000\\n\\nconst server = new ApolloServer({\\n  typeDefs,\\n  resolvers\\n})\\n\\nserver.applyMiddleware({ app })\\n\\napp.listen(port, () =>\\n  console.log(\\n    `\\uD83D\\uDE80 Server ready at http://localhost:${port}${server.graphqlPath}`\\n  )\\n)\\n\")), mdx(\"p\", null, \"Now, go to the terminal window and run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node index.js\"), \" command. If you get zero errors, that means your server is running successfully. Also, make sure if you are using the local instance of MongoDB database, make sure to run the command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongod\"), \" to kickstart the MongoDB service.\"), mdx(\"h2\", null, \"Real-time Database Updates with GraphQL API\"), mdx(\"p\", null, \"Once the server is running, visit the Apollo playground URL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:5000/graphql\"), \" and run the following mutation.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"mutation {\\n  createTweet(tweet: \\\"\\uD83D\\uDC4B Hello\\\", author: \\\"User12\\\") {\\n    _id\\n    tweet\\n    author\\n  }\\n}\\n\")), mdx(\"p\", null, \"On running this mutation you will get the following result.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss2-3.png\",\n    \"alt\": \"ss3\"\n  }))), mdx(\"p\", null, \"Add a bunch of more tweets by running the above mutation again. Now, let us run a query to fetch all the tweets from the database.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"query {\\n  getTweets {\\n    _id\\n    tweet\\n    author\\n  }\\n}\\n\")), mdx(\"p\", null, \"Writing the keyword \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"query\"), \" is an option only in the case of running a query. This is not possible in the case of running a mutation operation. You have to specify the keyword \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mutation\"), \". The above query fetches the unique identifier of each tweet in the database as well as the tweet and the name of the author itself. See the result below.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss3-4.png\",\n    \"alt\": \"ss3\"\n  }))), mdx(\"p\", null, \"To delete a tweet from the database, all you have to provide is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_id\"), \" of the tweet and provide sub-fields. Providing at least sub-field is necessary for the delete mutation to run, otherwise, it will throw an error.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"mutation {\\n  deleteTweet(_id: \\\"5ce1a2f4f1ef7153d0fc7776\\\") {\\n    tweet\\n    author\\n  }\\n}\\n\")), mdx(\"p\", null, \"You will get the following result.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss4-3.png\",\n    \"alt\": \"ss4\"\n  }))), mdx(\"p\", null, \"Run the query to fetch all the tweets to see how many tweets are left.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss5-4.png\",\n    \"alt\": \"ss5\"\n  }))), mdx(\"p\", null, \"The last operation is to update a tweet. Again, it is a mutation. All you to provide is the updated tweet in the form of a string and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_id\"), \" of the tweet you want to update.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"mutation {\\n  updateTweet(\\n    _id: \\\"5cd7cb5f19c9b4673f860600\\\"\\n    tweet: \\\"This could be my last tweet...\\\"\\n  ) {\\n    _id\\n    tweet\\n    author\\n  }\\n}\\n\")), mdx(\"p\", null, \"The output you get:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss6-1.png\",\n    \"alt\": \"ss6\"\n  }))), mdx(\"p\", null, \"By fetching all the tweets you can verify that the updating mutation worked!\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/05/ss7-2.png\",\n    \"alt\": \"ss7\"\n  }))), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"If you completed this tutorial, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Congratulations!\\uD83C\\uDF89\")), mdx(\"p\", null, \"Not only did you learn how to configure and integrate an Express web server with the Apollo server library and MongoDB database. You ended up building complete CRUD functionality.\"), mdx(\"p\", null, \"Apollo Server is an open source project and is one the most stable solution to create GraphQL APIs for full-stack applications. It also supports client-side out of the box for React, Vue, Angular, Meteor, and Ember as well as Native mobile development with Swift and Java.\"), mdx(\"p\", null, \"You can find the complete code for the tutorial in this \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"https://github.com/amandeepmittal/twitter-clone-apollo-server\"\n  }), \"Github repository\")), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://blog.crowdbotics.com/build-a-twitter-clone-server-with-apollo-graphql-nodejs-and-crowdbotics/\"\n  }), \"Originally published at Crowdbotics\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"970b1f57-b3f8-524b-a1da-87b0462e14ca","prev":{"id":"607caaad-f054-5307-bc59-05773c31c46d","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"If you are building web applications with ReactJS, you might have heard or used TypeScript. They say TypeScript is the missing part from JavaScript's ecosystem. I must say, I did not enjoy writing React apps in TypeScript at first. But over time, I…","fields":{"title":"How to Setup a React App with TypeScript, Storybook","slug":"setup-a-react-app-with-typescript-storybook","date":"2019-06-14T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"33be57d9-c8b9-52e4-b9e9-87edb96e9195","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"Creating a better user experience is one of the most important aspects of any application. This is where animations in mobile applications come into play. Animations are an important part of your mobile application. Fortunately, for React Native…","fields":{"title":"Build a Custom Modal with the Animated API in React Native","slug":"build-a-custom-modal-with-the-animated-api-in-react-native","date":"2019-06-13T00:00:00.000Z"},"code":{"scope":""}}}}}