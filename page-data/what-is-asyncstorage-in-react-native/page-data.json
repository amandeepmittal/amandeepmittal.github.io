{"componentChunkName":"component---src-templates-post-js","path":"/what-is-asyncstorage-in-react-native","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"What is AsyncStorage in React Native?","date":"August 09, 2019","author":"Aman Mittal","banner":null,"slug":"what-is-asyncstorage-in-react-native","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"what-is-asyncstorage-in-react-native\",\n  \"date\": \"2019-08-09T00:00:00.000Z\",\n  \"title\": \"What is AsyncStorage in React Native?\",\n  \"categories\": [\"react native\"],\n  \"description\": \"---\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://unsplash.com/photos/v8ppsvUTwGE\",\n    \"alt\": \"Cover Image Credits to Unsplash and Tom Pumford\"\n  }))), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" is a simple, asynchronous key-value pair used in React Native applications. It\\u2019s used for a variety of scenarios but mainly to store data when your app is not using any cloud services, or when you want to implement features in your app that require data storage.\"), mdx(\"p\", null, \"It operates globally in a React Native app and comes with its own limitations. As a React Native developer, you have to know what these limitations are. The first limitation of an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" API is that the size of the database is set to a 6MB limit. Also, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" storage is based on SQLite.\"), mdx(\"p\", null, \"Thus, it\\u2019s important to keep \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.sqlite.org/limits.html\"\n  }), \"SQLite limitations\"), \" in mind, too. Also, it\\u2019s hard to store complex and nested data structures in the form of key-value pairs. Knowing about these limitations will help you to opt for the best solution when developing a mobile app.\"), mdx(\"p\", null, \"According to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://facebook.github.io/react-native/docs/asyncstorage\"\n  }), \"React Native\\u2019s official documentation\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"On iOS, AsyncStorage is backed by native code that stores small values in a serialized dictionary and larger values in separate files. On Android, AsyncStorage will use either RocksDB or SQLite based on what is available.\")), mdx(\"h2\", null, \"Create an Expo app\"), mdx(\"p\", null, \"To get started, you\\u2019ll need to generate a new Expo project. This could be done by opening a terminal window, navigating to a suitable location where you develop projects, and running the following commands in the order they\\u2019re described.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"expo init offline-app\\n\\n# navigate inside the app folder\\ncd offline-app\\n\")), mdx(\"p\", null, \"Note: yarn is currently being used as the package manager. You can also use npm instead of yarn.\"), mdx(\"h2\", null, \"Utilizing the AsyncStorage API\"), mdx(\"p\", null, \"In this section, let\\u2019s build an app that saves a value to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" and fetches the value from the storage in the client-side React Native app. This will help you learn how to write basic operations using the storage API. Lastly, you\\u2019ll learn about how to clear the storage completely.\"), mdx(\"p\", null, \"Open the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"App.js\"), \" file and add the snippet below. Start by importing the necessary components from the React Native API. The most important one here is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \". After that, define a variable named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"STORAGE_KEY\"), \". This variable will be used to store and retrieve the stored data using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" API.\"), mdx(\"p\", null, \"Think of it as an identifier for the value being stored or the name of the key in the key-value pair. Since you\\u2019re going to store only one value at the moment, there\\u2019s only the requirement for one key.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React from 'react'\\nimport {\\n  StyleSheet,\\n  Text,\\n  View,\\n  TextInput,\\n  AsyncStorage,\\n  TouchableOpacity\\n} from 'react-native'\\n\\nconst STORAGE_KEY = '@save_name'\\n\")), mdx(\"p\", null, \"Next, let\\u2019s define an initial state with two empty strings. They\\u2019re going to be used to save the value of the user input and then retrieve the value to display it on the app screen. After defining the initial state, there\\u2019s going to be a lifecycle method that will load the data when the application starts for the first time, or when the App component renders.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"class App extends React.Component {\\n  state = {\\n    text: '',\\n    name: ''\\n  }\\n\\n  componentDidMount() {\\n    this.retrieveData()\\n  }\\n\\n  // ...\\n}\\n\")), mdx(\"p\", null, \"In the above snippet, note that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"App\"), \" component is actually a class component and not the default functional component that comes with boilerplate Expo app.\"), mdx(\"h2\", null, \"Read the data\"), mdx(\"p\", null, \"There are three asynchronous methods that will help to store the data, retrieve the data, and clear the app data that are stored. Each of these methods is going to utilize the appropriate API method from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" API. Every method in the AsyncStorage API is promise-based; hence, let\\u2019s use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async/await\"), \" syntax to follow best practices.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"retrieveData = async () => {\\n  try {\\n    const name = await AsyncStorage.getItem(STORAGE_KEY)\\n\\n    if (name !== null) {\\n      this.setState({ name })\\n    }\\n  } catch (e) {\\n    alert('Failed to load name.')\\n  }\\n}\\n\")), mdx(\"p\", null, \"In the above snippet, the name of the method implies what it\\u2019s going to do in the app. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"retrieveData\"), \" method is what fetches the data from storage if it exists. It uses the same identifier that you defined previously, outside the class function component. It utilizes the parameter in the state object name.\"), mdx(\"p\", null, \"Note that there\\u2019s an if condition inside this method. This condition makes sure that data is fetched only when a value for the name variable exists. This method also uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"try/catch\"), \", as they are part and parcel of writing functions with modern \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async/await\"), \" syntax. Lastly, this method is being invoked inside the lifecycle method.\"), mdx(\"h2\", null, \"Save the Data\"), mdx(\"p\", null, \"The next function is going to save the data. In the below snippet, you\\u2019ll find that it uses a parameter name, which, on success, is the value that\\u2019s stored. An alert message will be shown when the input data is saved.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"save = async name => {\\n  try {\\n    await AsyncStorage.setItem(STORAGE_KEY, name)\\n    alert('Data successfully saved!')\\n    this.setState({ name })\\n  } catch (e) {\\n    alert('Failed to save name.')\\n  }\\n}\\n\")), mdx(\"h2\", null, \"Remove Everything\"), mdx(\"p\", null, \"The last method that you are going to utilize from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" API is called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"clear()\"), \". This deletes everything that is previously saved. It is not recommended to use this method directly if you want to delete only a specific item from the storage. For that, there are methods like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"removeItem\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"multiRemove\"), \" available by the API. You can read more about them in the official documentation \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://facebook.github.io/react-native/docs/asyncstorage#clear\"\n  }), \"here\"), \" or later when building the Todolist application.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"removeEverything = async () => {\\n  try {\\n    await AsyncStorage.clear()\\n    alert('Storage successfully cleared!')\\n  } catch (e) {\\n    alert('Failed to clear the async storage.')\\n  }\\n}\\n\")), mdx(\"p\", null, \"This snippet will throw an alert box on the device screen when everything is cleared from storage.\"), mdx(\"h2\", null, \"Completing the App\"), mdx(\"p\", null, \"The last two methods are going to be used to create a controlled input.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"onChangeText = text => this.setState({ text })\\n\\nonSubmitEditing = () => {\\n  const onSave = this.save\\n  const { text } = this.state\\n\\n  if (!text) return\\n\\n  onSave(text)\\n  this.setState({ text: '' })\\n}\\n\")), mdx(\"p\", null, \"After that, add the code snippet for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"render\"), \" method, followed by the styles for each UI component. Lastly, don\\u2019t forget to export the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"App\"), \" component so it can run on the simulator or the real device.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"render() {\\n        const { text, name } = this.state\\n        return (\\n            <View style={styles.container}>\\n                <TextInput\\n                    style={styles.input}\\n                    value={text}\\n                    placeholder='Type your name, hit enter, and refresh'\\n                    onChangeText={this.onChangeText}\\n                    onSubmitEditing={this.onSubmitEditing}\\n                />\\n                <Text style={styles.text}>Hello {name}!</Text>\\n                <TouchableOpacity onPress={this.removeEverything} style={styles.button}>\\n                    <Text style={styles.buttonText}>Clear Storage</Text>\\n                </TouchableOpacity>\\n            </View>\\n        )\\n    }\\n} // class component App ends here\\n\\nconst styles = StyleSheet.create({\\n    container: {\\n        flex: 1,\\n        backgroundColor: '#fff',\\n        alignItems: 'center',\\n        justifyContent: 'center'\\n    },\\n    text: {\\n        fontSize: 20,\\n        padding: 10,\\n        backgroundColor: '#00ADCF'\\n    },\\n    input: {\\n        padding: 15,\\n        height: 50,\\n        borderBottomWidth: 1,\\n        borderBottomColor: '#333',\\n        margin: 10\\n    },\\n    button: {\\n        margin: 10,\\n        padding: 10,\\n        backgroundColor: '#FF851B'\\n    },\\n    buttonText: {\\n        fontSize: 14,\\n        color: '#fff'\\n    }\\n})\\n\\nexport default App\\n\")), mdx(\"h2\", null, \"Running the App\"), mdx(\"p\", null, \"Now to run the application, go to the terminal window and execute the command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"expo start\"), \". After that, you\\u2019ll see the following screen on the simulator.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://miro.medium.com/max/350/1*92vU3B3f_FmUCXk8xKwtSg.png\",\n    \"alt\": \"ss1\"\n  }))), mdx(\"p\", null, \"Since there\\u2019s no data stored right now, the text after the word \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello\"), \" is empty. Use the input field to save a string or a name or anything you\\u2019d like, and then press the enter key. You\\u2019ll get the following output. Whatever input you entered, it will be displayed next to the word \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://miro.medium.com/max/350/1*twgilQew9SwvBq2YnEbIqg.png\",\n    \"alt\": \"ss2\"\n  }))), mdx(\"p\", null, \"Even if you refresh the Expo client, the value stored doesn\\u2019t go away. Only when pressing the button below the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello\"), \" statement that says \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Clear Storage\"), \" will the stored value be removed.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://miro.medium.com/max/350/1*6yeaeFLns1JwU0wyeqMptQ.png\",\n    \"alt\": \"ss3\"\n  }))), mdx(\"p\", null, \"Refresh the Expo client after you clear the storage to get the following output.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://miro.medium.com/max/350/1*CRhOwbo1d-iTUOEb0v-MAQ.png\",\n    \"alt\": \"ss4\"\n  }))), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"This completes the section about using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" API to save and fetch the data.\"), mdx(\"p\", null, \"If you'd like to learn more about using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsynStorage API\"), \" in a real-time React Native app, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"learn how to build a complete Todolist app \", mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"https://heartbeat.fritz.ai/building-offline-react-native-apps-with-asyncstorage-dcb4b0657f93\"\n  }), \"here\")), \". In this post, you are going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://nativebase.io/\"\n  }), \"Native Base\"), \" UI component library.\"), mdx(\"p\", null, \"Here is short \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TLDR\"), \" of the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Todolist post\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Adding navigation\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Creating a Floating Action Button (FAB)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Navigating between two screens\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Customize the header component\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Rendering a list of items using FlatList\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Reading data using the AsyncStorage API\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Adding a to-do list item\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Deleting a to-do list item\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Mark an item check or uncheck upon completion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Passing data between different screens using the navigation\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Display each to-do list item\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Bonus section: Adding a segment\")), mdx(\"p\", null, \"Here is a little demo of what you are going to build in the Todolist post:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://miro.medium.com/max/313/1*FBBSWT3Xztc0G9wAGnz1yA.gif\",\n    \"alt\": \"ss5\"\n  }))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dev.to/amanhimself/what-is-asyncstorage-in-react-native-4af4\"\n  }), \"Originally published at Dev.to\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"0f836d98-7d0d-5a71-b88b-997a8a9f31b5","prev":{"id":"e32467b7-9fec-5a42-be8b-f66aebcdea7a","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"Geolocation as an API has different methods that can be used in a web application. But it’s also a powerful API for mobile development. Ride share mobile apps like Uber, map app like Google Maps, and location features implemented in apps like…","fields":{"title":"How to use the Geolocation API in a React Native app","slug":"how-to-use-the-geolocation-api-in-a-react-native-app","date":"2019-08-16T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"e0c28940-6c9d-5abe-a7a3-b97a47b8fa40","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"As developers, we love exploring concepts and mechanisms while working with a new framework. React Native as a cross-platform development framework has come quite far in terms of a mature framework since I started playing around with it and then…","fields":{"title":"Building offline React Native apps with AsyncStorage","slug":"building-offline-react-native-apps-with-asyncstorage","date":"2019-08-08T00:00:00.000Z"},"code":{"scope":""}}}}}