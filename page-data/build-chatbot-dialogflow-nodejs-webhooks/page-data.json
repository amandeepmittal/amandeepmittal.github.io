{"componentChunkName":"component---src-templates-post-js","path":"/build-chatbot-dialogflow-nodejs-webhooks","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"How to Create a Chatbot with Dialogflow, NodeJS, and Webhooks","date":"July 19, 2019","author":"Aman Mittal","banner":null,"slug":"build-chatbot-dialogflow-nodejs-webhooks","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"build-chatbot-dialogflow-nodejs-webhooks\",\n  \"date\": \"2019-07-19T00:00:00.000Z\",\n  \"title\": \"How to Create a Chatbot with Dialogflow, NodeJS, and Webhooks\",\n  \"categories\": [\"nodejs\"],\n  \"description\": \"---\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/dialogflow-crowdbotics.jpg\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"Chatbots are the hottest things in the modern digital world. Every day, organizations and individuals are powering their digital products such as websites or messenger apps to provide conversational experiences for their users. Each conversational experience depends on the implementation of the chatbot to either be a good or poor experience for the user. The modern day world is living in the technology wave of Artificial Intelligence, and chatbots are a massive part of it.\"), mdx(\"p\", null, \"In this tutorial, you are going to be introduced to an easy to use tool for such uses cases known as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dialogflow.com/\"\n  }), \"Dialogflow\"), \". Formerly known as API.AI, it can be customized to provide information such as weather in your user's city or information about a movie they like to see. This customization, however, can only be applied using a third party API that is consistent in delivering results for the specific search term.\"), mdx(\"p\", null, \"By providing a step by step on setting up and running the chatbot and how to use a third party API with Dialogflow. You are going to create a custom webhook using Nodejs, deploy it as a service, and then use it with your Dialogflow setups to develop agents and intents. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"What are webhooks, you ask?\")), mdx(\"p\", null, \"A Webhook is a simple HTTP callback that gets triggered based on some event. These events are defined by the user, for example, publishing a comment to blog post, or publishing a new tweet on your Twitter app.\"), mdx(\"p\", null, \"You are going to build a movie chatbot that provides information about a movie using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.omdbapi.com\"\n  }), \"The Open Movie Database API\"), \". The webhooks will be used to fetch the details of a film.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Table of Contents\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Requirements\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create a Node Server\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fetching the Movie\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Deploy the Webhook on Heroku\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Setup Dialogflow\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create Training Phrases\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable the Webhook\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Conclusion\")), mdx(\"h2\", null, \"Requirements\"), mdx(\"p\", null, \"To follow this tutorial, you need the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Nodejs v8.x.x or higher installed along with npm/yarn as the package manager\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Github Account\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Crowdbotics App builder Platform account (preferably log in with your valid Github ID)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Dialogflow account (\", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"you can use your Google ID\"), \")\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developers.themoviedb.org/3/getting-started/introduction\"\n  }), \"OMDb API API Key\"), \": make sure when you register the account, you request for an API key. It is very to get one, register an account.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Heroku or some similar service to deploy the webhook\")), mdx(\"h2\", null, \"Create a Node Server\"), mdx(\"p\", null, \"The following steps have to perform inside the project directory you have set up to create the Nodejs server. Once you are inside the server folder, make sure you run the following commands sequentially using a terminal window. The first command will initialize the server directory as a node server and generate a package.json file. The second command will let you install all the required dependencies.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"# to initialize\\nnpm init --yes\\n\\n# to install dependencies\\nnpm install -save express dotenv\\n\")), mdx(\"p\", null, \"Once all the dependencies are installed, let us bootstrap a small server and see if everything is working or not. Create a new file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" and add the following snippet to it.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const express = require('express')\\n// will use this later to send requests\\nconst http = require('http')\\n// import env variables\\nrequire('dotenv').config()\\n\\nconst app = express()\\nconst port = process.env.PORT || 3000\\n\\napp.use(express.json())\\napp.use(express.urlencoded({ extended: true }))\\n\\napp.get('/', (req, res) => {\\n  res.status(200).send('Server is working.')\\n})\\n\\napp.listen(port, () => {\\n  console.log(`\\uD83C\\uDF0F Server is running at http://localhost:${port}`)\\n})\\n\")), mdx(\"p\", null, \"The above server is simple as it can be with only one \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" home route for now. This route is created now only to test whether the server being bootstrapped in this section is going to work or not. Sometimes small errors are time wasters, so it is better to check out. The module \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dotenv\"), \" enable the file to read environment variables and their values from the file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \". Here is how the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" the file looks like.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-env\"\n  }), \"API_KEY=XXXX\\n\")), mdx(\"p\", null, \"The Xs are going to be the value of the API key that you have got from registering an account at OMDB API. Replace the value of these Xs with that key. Now, go to the terminal window and execute the command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node index.js\"), \". This will prompt with the message you have defined in the above snippet. Visit the URL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:3000\"), \" from the browser window, and you will get the following result.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss3-1.png\",\n    \"alt\": \"ss3\"\n  }))), mdx(\"h2\", null, \"Fetching the Movie\"), mdx(\"p\", null, \"In this section, you are going to create a route called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/getmovie\"), \". It is going to be a post request. This request is going to search for the movie specified on the user's input. If that movie exists, it will return the user with the details of the movie such as the name itself, the year it was released, a summarised plot, and so on.\"), mdx(\"p\", null, \"Open \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" file and the following after you have defined middleware functions.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"app.post('/getmovie', (req, res) => {\\n  const movieToSearch =\\n    req.body.queryResult &&\\n    req.body.queryResult.parameters &&\\n    req.body.queryResult.parameters.movie\\n      ? req.body.result.parameters.movie\\n      : ''\\n\\n  const reqUrl = encodeURI(\\n    `http://www.omdbapi.com/?t=${movieToSearch}&apikey=${process.env.API_KEY}`\\n  )\\n  http.get(\\n    reqUrl,\\n    responseFromAPI => {\\n      let completeResponse = ''\\n      responseFromAPI.on('data', chunk => {\\n        completeResponse += chunk\\n      })\\n      responseFromAPI.on('end', () => {\\n        const movie = JSON.parse(completeResponse)\\n\\n        let dataToSend = movieToSearch\\n        dataToSend = `${movie.Title} was released in the year ${movie.Year}. It is directed by ${movie.Director} and stars ${movie.Actors}.\\\\n Here some glimpse of the plot: ${movie.Plot}.\\n                }`\\n\\n        return res.json({\\n          fulfillmentText: dataToSend,\\n          source: 'getmovie'\\n        })\\n      })\\n    },\\n    error => {\\n      return res.json({\\n        fulfillmentText: 'Could not get results at this time',\\n        source: 'getmovie'\\n      })\\n    }\\n  )\\n})\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http\"), \" module is from Nodejs core. It is going to send the request which is the variable \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"reqUrl\"), \" and a callback function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"responseFromAPI\"), \". This function is going to trigger two events: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"end\"), \". The event \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \" is going to return the information about the movie from API in chunks.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"completeResponse\"), \" holds the data is parsed into JSON when the response from the API is ended. The customized response that is being returned in the above route's snippet should contain the field \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fulfillmentText\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"error\"), \" response for cases that might now work at all.\"), mdx(\"p\", null, \"On a side note, here is how an object for a specific movie data in JSON looks like from the OMDB API.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"Title\\\": \\\"Flashbacks of a Fool\\\",\\n  \\\"Year\\\": \\\"2008\\\",\\n  \\\"Rated\\\": \\\"R\\\",\\n  \\\"Released\\\": \\\"17 Oct 2008\\\",\\n  \\\"Runtime\\\": \\\"109 min\\\",\\n  \\\"Genre\\\": \\\"Drama\\\",\\n  \\\"Director\\\": \\\"Baillie Walsh\\\",\\n  \\\"Writer\\\": \\\"Baillie Walsh\\\",\\n  \\\"Actors\\\": \\\"Emile Robert, Scoutt Lowe, Daniel Craig, Julie Ordon\\\",\\n  \\\"Plot\\\": \\\"A fading Hollywood star looks back at the days of his youth as he returns home from his best friend's funeral.\\\",\\n  \\\"Language\\\": \\\"English\\\",\\n  \\\"Country\\\": \\\"UK\\\",\\n  \\\"Awards\\\": \\\"N/A\\\",\\n  \\\"Poster\\\": \\\"https://m.media-amazon.com/images/M/MV5BMTIzMDk0MDc3OV5BMl5BanBnXkFtZTcwODMwODY5MQ@@._V1_SX300.jpg\\\",\\n  \\\"Ratings\\\": [\\n    { \\\"Source\\\": \\\"Internet Movie Database\\\", \\\"Value\\\": \\\"6.8/10\\\" },\\n    { \\\"Source\\\": \\\"Rotten Tomatoes\\\", \\\"Value\\\": \\\"38%\\\" }\\n  ],\\n  \\\"Metascore\\\": \\\"N/A\\\",\\n  \\\"imdbRating\\\": \\\"6.8\\\",\\n  \\\"imdbVotes\\\": \\\"11,348\\\",\\n  \\\"imdbID\\\": \\\"tt1037218\\\",\\n  \\\"Type\\\": \\\"movie\\\",\\n  \\\"DVD\\\": \\\"22 Sep 2008\\\",\\n  \\\"BoxOffice\\\": \\\"N/A\\\",\\n  \\\"Production\\\": \\\"Anchor Bay Entertainment\\\",\\n  \\\"Website\\\": \\\"http://www.thefilmfactory.co.uk/flashbacks/\\\",\\n  \\\"Response\\\": \\\"True\\\"\\n}\\n\")), mdx(\"p\", null, \"From this considerable object, you are only using some amount of information described in the previous snippet. To test that the result is being fetched from the OMDB API, start the server by going to the terminal window. Execute command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node index.js\"), \".\"), mdx(\"p\", null, \"Open your favorite rest clients such as Postman or Insomnia. Enter the URL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:3000/getmovie\"), \" and even though it is POST request, and you will have to enter the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"parameters\"), \" as shown below. Let us test out if the API is returning the details of the movie name entered or not. In the below image, you can verify that the information related to the data is being replaced.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/SS4.png\",\n    \"alt\": \"ss4\"\n  }))), mdx(\"h2\", null, \"Deploy the Webhook on Heroku\"), mdx(\"p\", null, \"Since the route \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/getmovie\"), \" is working, it is time to deploy the webhook you successfully build in the previous step. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://id.heroku.com/login\"\n  }), \"Login\"), \" to your Heroku account or if you do not have one, create an account. You can upload up to five web applications that can run for free to some number of hours (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"called as dynos\"), \").\"), mdx(\"p\", null, \"Before you proceed with any of the steps below, in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file, make sure the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start\"), \" script exists as specified below.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"\\\"scripts\\\": {\\n        \\\"start\\\": \\\"node index.js\\\",\\n        \\\"test\\\": \\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\"\\n}\\n\")), mdx(\"p\", null, \"Once you log in, you will be welcomed by the screen known as Dashboard. Create on the button \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"New\"), \" on the top right corner and then create choose \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create new app\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss5-1.png\",\n    \"alt\": \"ss5\"\n  }))), mdx(\"p\", null, \"Fill in the name of the application. Once you have entered the details, click the button \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create app\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss6-1.png\",\n    \"alt\": \"ss6\"\n  }))), mdx(\"p\", null, \"Now, you will be welcomed by the following page that has instructions to deploy your current Node app. If you are using Github, go ahead and choose the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Connect to Github\"), \" deployment method. I am going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://devcenter.heroku.com/articles/heroku-cli\"\n  }), \"heroku-cli\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss7-1.png\",\n    \"alt\": \"ss7\"\n  }))), mdx(\"p\", null, \"To proceed with the following set of instructions, also as mentioned in the above screen under the section \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Deploy using Heroku Git\"), \". What this means is that the instance of your complete Node application is going to be deployed from the local development environment where the application is currently located. Once you have installed the Heroku CLI, enter the following command to proceed. Also, if you are using the Crowdbotics platform to generate the current demo app or have initialized the directory, you are working using the command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git init\"), \", ignore the section \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Clone the repository\"), \" in the above image.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"# login\\nheroku login\\n\\n# to deploy\\n$ git add .\\n$ git commit -am \\\"deploy\\\"\\n$ git push heroku master\\n\")), mdx(\"p\", null, \"The only thing to notice here is that you are not going to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"git push\"), \" to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"origin\"), \" but \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"heroku\"), \". Once the deployment is done, you will get a message like below in the terminal window.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"remote:        https://getmoviehook.herokuapp.com/ deployed to Heroku\\nremote:\\nremote: Verifying deploy... done.\\nTo https://git.heroku.com/getmoviehook.git\\n * [new branch]      master -> master\\n\")), mdx(\"p\", null, \"You will get the URL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://getmoviehook.herokuapp.com/\"), \" from the above deployment procedure. To test it out, you cannot merely send a GET request by visiting the URL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://getmoviehook.herokuapp.com/getmovie\"), \" from a browser window. You can again use a REST client like Postman. Just replace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost\"), \" URL with deployed one that is previously mentioned.\"), mdx(\"p\", null, \"You will get successful results.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss8-1.png\",\n    \"alt\": \"ss8\"\n  }))), mdx(\"h2\", null, \"Setup Dialogflow\"), mdx(\"p\", null, \"Dialogflow is a Natural Language Processing (NLP) service from Google. It has many integrations, SDKs for programming languages and some prebuilt agents. It works very straightforward with Google Assistant. Visit the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dialogflow.com/\"\n  }), \"Dialogflow website\"), \" and create a new account or log-in with your existing Google ID.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss9-2.png\",\n    \"alt\": \"ss9\"\n  }))), mdx(\"p\", null, \"Once you are logged in, you will be welcomed by a screen that consists of different \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Agents\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss10.png\",\n    \"alt\": \"ss10\"\n  }))), mdx(\"p\", null, \"Click on the Create Agent button to make one for yourself. Name it something similar to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OMDBbot\"), \". Fill in the details like below.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss11.png\",\n    \"alt\": \"ss11\"\n  }))), mdx(\"p\", null, \"After filling out the details, click on the button \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create\"), \".\"), mdx(\"p\", null, \"Generally, for small applications, you will have one agent. In Dialogflow, the basic flow of conversation involves these steps:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The user giving input in the form of a query\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Your Dialogflow agent parses the input from the training phrases\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Your agent returns a response back to the user\")), mdx(\"p\", null, \"These agents understand the varied nuances of human language. They can translate that to standard and structured meaning that chatbot applications and services can understand. Each agent contains different \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"intents\"), \". The intent is the action taken based on the user's input. It can be the response sent back to the user in a chatbot application. It can contain different types of responses or actions. The next step in the process is to create your first intent.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss12.png\",\n    \"alt\": \"ss12\"\n  }))), mdx(\"p\", null, \"Click on the button \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create intent\"), \" and fill in the name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getmovie\"), \". You can name your intent anything.\"), mdx(\"p\", null, \"Intent can be a simple text response that is displayed back to the user or a set of trained phrases. There are also actions and parameters that extract information from user queries. Examples of this kind of information include dates, times, names, places, and more.\"), mdx(\"h2\", null, \"Create Training Phrases\"), mdx(\"p\", null, \"Let us create new training phrases in this section. To create a new phrase, go to the section \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Training phrases\"), \" and a unique user expression as shows below.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss13.png\",\n    \"alt\": \"ss13\"\n  }))), mdx(\"p\", null, \"For the movie chatbot, each user expression is going to contain the name of the movie. The Dialogflow agent is not smart enough to extract the name of the movie out of the user's expression. You have to provide an entity that can highlight the name of the movie every time a new training phrase is introduced to the bot.\"), mdx(\"p\", null, \"From the sidebar menu, go to the entity section and click on the button \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create Entity\"), \". Fill in the name of your entity as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"movie\"), \" because this is what is being passed inside the webhook's request body. From the server, remember the following line:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"req.body.queryResult.parameters.movie\\n\")), mdx(\"p\", null, \"Once you have saved your entity, go back to the intent.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss14.png\",\n    \"alt\": \"ss14\"\n  }))), mdx(\"h2\", null, \"Enable the Webhook\"), mdx(\"p\", null, \"To test out that everything is working, let us use the default response provided by the Dialogflow intent. As shown below, on the right-hand side of the screen, you can test out by entering a user expression. The movie chatbot will return the default response.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss15.png\",\n    \"alt\": \"ss15\"\n  }))), mdx(\"p\", null, \"This is okay and verifies that the intent has been created successfully. Now, to use the real-time data from the OMDB API, you are going to enable the webhook. From the sidebar menu, go to the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Fulfillment\"), \" section. You will be welcomed by the following screen.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss16.png\",\n    \"alt\": \"ss16\"\n  }))), mdx(\"p\", null, \"Enable the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Webhook\"), \" and then enter the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"URL\"), \" of the deployed endpoint.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss17.png\",\n    \"alt\": \"ss17\"\n  }))), mdx(\"p\", null, \"Once that is done, go back to the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Intents\"), \" section, and scroll down to the bottom of the web page. There is a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Fulfillment\"), \" section. Toggle the button to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Enable webhook call for this intent\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss18.png\",\n    \"alt\": \"ss18\"\n  }))), mdx(\"p\", null, \"Once that is done, go to the right side of the screen to test it out. Fill in the user expression similar to a training phrase you have provided earlier. The agent will get a response back with the details of the movie.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://blog.crowdbotics.com/content/images/2019/07/ss19.png\",\n    \"alt\": \"ss19\"\n  }))), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"You have successfully created, deployed, and tested a Nodejs Webhook for Dialogflow chatbot application. By the end of this tutorial, we are sure you have learned how easy it is to create a new chatbot agent using Dialogflow. The possibilities of using a powerful API such as Dialogflow are endless. In no time, you can build up your own chatbot interface for front-end clients using Reactjs, Angular, and even mobile cross-platform framework like React Native. We hope this tutorial provided you an easy walkthrough to grab the concepts and build something of your own.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://blog.crowdbotics.com/build-chatbot-dialogflow-nodejs-webhooks/\"\n  }), \"Originally published at Crowdbotics\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"392064ff-b891-5862-94bc-7d8cd8b69dd7","prev":{"id":"9aa705db-4d05-51b2-ad7f-b4c8dbaa94a0","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"React Native when used with Expo as a toolchain eases out the common pain to manage ios and android applications. After saying that, I realized that there is a delight to use this ever-growing open source mobile application framework. Expo has gained…","fields":{"title":"How to build a xylophone app with Audio API, React Native, and Expo","slug":"how-to-build-a-xylophone-app-with-audio-api-react-native-and-expo","date":"2019-07-22T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"198844df-3d98-548b-9413-e6c7e98b7821","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"React is often used for building single page applications (SPAs). SPAs tend to have multiple page views. When navigating from one-page view to another, reloading the entire page view is a tedious and not so efficient task. In fact, it diminishes the…","fields":{"title":"Using React Router to Optimize Single Page Applications (SPAs)","slug":"introduction-to-react-router-v4-with-reactjs","date":"2019-07-11T00:00:00.000Z"},"code":{"scope":""}}}}}