{"componentChunkName":"component---src-templates-post-js","path":"/setting-up-nodejs-backend-for-a-react-app","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"Setting up Nodejs Backend for a React App","date":"October 18, 2018","author":"Aman Mittal","banner":null,"slug":"setting-up-nodejs-backend-for-a-react-app","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"setting-up-nodejs-backend-for-a-react-app\",\n  \"date\": \"2018-10-18T00:00:00.000Z\",\n  \"title\": \"Setting up Nodejs Backend for a React App\",\n  \"categories\": [\"MERN stack\"],\n  \"description\": \"Build a simple React web app with a Node.js backend using Hapi. Itâ€™s faster and easier than you might think.\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/1200/1*wKfORdOuFZDAHkHha5-_4A.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"In this article, I am going to walk you through setting up your own \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://crowdbotics.com/build/node-js\"\n  }), \"Node.js\"), \" backend server for a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://crowdbotics.com/build/react\"\n  }), \"React application\"), \". Both frameworks are often used together to build real time, fullstack web applications. A database, such as MySQL, Postgresql, or a NoSQL database such as MongoDB, is used to store information. For brevity\\u2019s sake, I will not use a database in this walkthrough.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Requirements:\"), \" You need Node.js and npm installed on your local machine as well as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"create-react-app\"), \" installed as a global dependency. If you do not have it, run the following command and install it.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install -g create-react-app\\n\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"In some cases, you might have to give root permissions when installing a global dependency.\")), mdx(\"p\", null, \"For the Nodejs backend, I am going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hapijs.com/\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"HapiJS\")), \". If you are not familiar with it, it will be fun as you will be learning a lot of new things.\"), mdx(\"h3\", null, \"Getting Started with the\\xA0Backend\"), mdx(\"p\", null, \"To start, we need an empty directory inside which we can have our server and client live alongside each other. Initialize it by running the command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm init\"), \" and you are ready to install Hapijs as a framework to build the web server.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install hapi --save\\n\")), mdx(\"p\", null, \"After Express, Hapi is quite popular among teams and individuals who write the server side of their application using Node. Hapi is currently being used by organizations such as Walmart and Yahoo and has an active community. After the dependency is successfully installed, create a new file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"server.js\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"'use strict'\\n\\nconst Hapi = require('hapi')\\n\\n// Create a server with a host and port\\nconst server = Hapi.server({\\n  host: 'localhost',\\n  port: 8000\\n})\\n\\n// Add the route\\nserver.route({\\n  method: 'GET',\\n  path: '/',\\n  handler: (request, h) => {\\n    return 'hello world'\\n  }\\n})\\n\\n// Start the server\\nasync function start() {\\n  try {\\n    await server.start()\\n  } catch (err) {\\n    console.log(err)\\n    process.exit(1)\\n  }\\n\\n  console.log('Server running at:', server.info.uri)\\n}\\n\\nstart()\\n\")), mdx(\"p\", null, \"This is the most basic server you can create using Hapi.\"), mdx(\"p\", null, \"We start as usual by requiring Hapijs dependency and create a new object with a configuration of our own. See the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"host\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"port\"), \" above.\"), mdx(\"p\", null, \"After that, we add a simple route that uses HTTP method \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" and has a handler function or usually called a callback function to return the response back to the client when a request comes in. Lastly, we are creating an asynchronous function to bootstrap the server using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async/await\"), \" syntax.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async/await\"), \" requires you to add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"try/catch\"), \" block every time you want to catch the errors. We \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"console.log\"), \" in case any error occurs running the program and use Nodejs global \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"process\"), \" object to make sure that program exits gracefully in case of one. To see it in action, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node server.js\"), \" and it will eventually run on port \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"8000\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/800/1*yR_UcIKCzTeNoN9HPYCNdQ.png\",\n    \"alt\": null\n  }))), mdx(\"h3\", null, \"Setting up a React\\xA0app\"), mdx(\"p\", null, \"Now that we have built our server, let us create the front end of our application. We have already installed the main ingredient we need to start with. Open your terminal and type:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"create-react-app client\\n\")), mdx(\"p\", null, \"This will create a react application named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client\"), \" inside the folder where we previously built our server. Simple as that.\"), mdx(\"p\", null, \"Now you can traverse to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client\"), \" directory and run the React app separately on a different port. However, this is not what we want.\"), mdx(\"h3\", null, \"The proxy\"), mdx(\"p\", null, \"We want a setup that will make our React app and use the server URL as a global variable. This is easier than you might think.\"), mdx(\"p\", null, \"Navigate to client directory and locate \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file. Add the following configuration to it.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/800/1*jEgu48E180zXD0Z3_NyuHA.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"And that\\u2019s it. This is all you need to do. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"But wait! How is this even possible?\"), \" The answer lies with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"create-react-app\"), \".\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"create-react-app\"), \" does all this automatically and behind the scene because it is using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://webpack.js.org/\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"webpack\")), \".\"), mdx(\"p\", null, \"Webpack has a development server that uses a proxy to handle the API server or in other terms, it requests to our Hapi server running on port \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"8000\"), \". This is one of the biggest advantages I have found for using create-react-app so far. Webpack handles all the configuration.\"), mdx(\"h3\", null, \"Conclusion: Running the\\xA0app\"), mdx(\"p\", null, \"Let us now test a route that sends the data from the Hapi backend server to React front-end side whenever a request comes from the client. Create a route /\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mock\"), \"in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"server.js\"), \" to serve the data the dummy data defined as an array \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data\"), \" itself.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"'use strict'\\n\\nconst Hapi = require('hapi')\\n\\n// mock data\\n\\nconst data = [\\n  { id: 1, name: 'Alex', age: 21 },\\n  { id: 2, name: 'Alice', age: 23 }\\n]\\n\\n// Create a server with a host and port\\nconst server = Hapi.server({\\n  host: 'localhost',\\n  port: 8000\\n})\\n\\n// Add the route\\nserver.route({\\n  method: 'GET',\\n  path: '/',\\n  handler: (request, h) => {\\n    return 'hello world'\\n  }\\n})\\n\\nserver.route({\\n  method: 'GET',\\n  path: '/mock',\\n  handler: (request, h) => {\\n    return { data }\\n  }\\n})\\n\\n// Start the server\\nasync function start() {\\n  try {\\n    await server.start()\\n  } catch (err) {\\n    console.log(err)\\n    process.exit(1)\\n  }\\n\\n  console.log('Server running at:', server.info.uri)\\n}\\n\\nstart()\\n\")), mdx(\"p\", null, \"To test this route, let us use REST client like POSTMAN or Insomnia and see if the data is being requested at the route \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/mock\"), \".\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/1200/1*ygiAUjIzThy-NHFfbi9Rsg.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"Now let us display this data in our front end. Traverse to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client/App.js\"), \" file and do the following.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React, { Component } from 'react'\\nimport logo from './logo.svg'\\nimport './App.css'\\n\\nclass App extends Component {\\n  state = {\\n    data: []\\n  }\\n\\n  componentDidMount() {\\n    this.fetchData()\\n      .then(res => this.setState(res))\\n      .catch(err => console.log(err))\\n  }\\n\\n  fetchData = async () => {\\n    const response = await fetch('/mock')\\n    const body = response.json()\\n\\n    return body\\n  }\\n\\n  render() {\\n    return (\\n      <div className=\\\"App\\\">\\n        <header className=\\\"App-header\\\">\\n          <img src={logo} className=\\\"App-logo\\\" alt=\\\"logo\\\" />\\n          <h1>Data from the Backend</h1>\\n          {this.state.data.map(person => (\\n            <p key={person.id}>\\n              Name: {person.name} <br /> Age: {person.age}\\n            </p>\\n          ))}\\n        </header>\\n      </div>\\n    )\\n  }\\n}\\n\\nexport default App\\n\")), mdx(\"p\", null, \"We start by defining a local state that will contain the data coming from the backend inside \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"componentDidMount()\"), \" life-cycle hook method. This further calls the asynchronous method\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fetchData()\"), \" that actually requests the data from the API url \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/mock\"), \". Since we have already defined the complete URL as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"proxy\"), \" we do not have to write the complete url.\"), mdx(\"p\", null, \"Finally, we are able to see the data as below.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/1200/1*79TNeMIHMbzT1Vcnh7ZNZw.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"You can find the complete source code for the above article at\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/amandeepmittal/hapi-react-example\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, mdx(\"em\", {\n    parentName: \"strong\"\n  }, \"Github Repo\")))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/crowdbotics/setting-up-nodejs-backend-for-a-react-app-fe2219f26ea4\"\n  }), \"Originally published at Crowdbotics\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"ba22f728-832b-5d4e-869d-ce42e9fdf74d","prev":{"id":"2d831003-5aff-5ac0-a52f-eca2275559b8","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"In this tutorial, I will show you step by step how to build a  Progressive Web Application  using  Angular . A Progressive Web Application is a performance focused web application that is streamlined for a mobile device. A PWA can be saved over aâ€¦","fields":{"title":"Learn to Build a Simple Progressive Web App (PWA) with Angular and Lighthouseâ€Šâ€”â€ŠHacker News Clone","slug":"learn-to-build-a-simple-progressive-web-app-pwa-with-angular","date":"2018-10-24T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"5e976c33-78a9-57d6-876b-d4971690e5f8","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"React Native is a framework for building native mobile apps using JavaScript. React Native is based on the same core concepts as ReactJS, giving you, the developer, the power to compose a cross-platform mobile UI by writing JavaScript componentsâ€¦","fields":{"title":"Build a Todo app with React Native and Expo","slug":"build-to-do-app-react-native-expo","date":"2018-10-18T00:00:00.000Z"},"code":{"scope":""}}}}}