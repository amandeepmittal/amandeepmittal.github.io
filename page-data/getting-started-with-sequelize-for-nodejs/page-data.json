{"componentChunkName":"component---src-templates-post-js","path":"/getting-started-with-sequelize-for-nodejs","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"Getting Started with Sequelize for Nodejs Applications","date":"May 30, 2017","author":"Aman Mittal","banner":null,"slug":"getting-started-with-sequelize-for-nodejs","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"getting-started-with-sequelize-for-nodejs\",\n  \"date\": \"2017-05-30T00:00:00.000Z\",\n  \"title\": \"Getting Started with Sequelize for Nodejs Applications\",\n  \"categories\": [\"nodejs\"],\n  \"description\": \"---\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/800/0*ShbzlvZjT-VI72oW.png\",\n    \"alt\": null\n  }))), mdx(\"h3\", null, \"Introduction to\\xA0ORM\"), mdx(\"p\", null, \"ORM or Object Relation Mapping is a process of mapping between objects and relation database systems. An ORM acts like an interface between two system. ORM provide advantages for developers from basic ones like saving time and effort and rather focusing on business logic. The code is robust instead of redundant. ORM helps in managing queries for multiple tables in an effective manner. Lastly, an ORM (like \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://docs.sequelizejs.com/en/v3/\"\n  }), \"sequelize\"), \") is capable to connect with different databases (which comes in handy when switching from one database to another).\"), mdx(\"h3\", null, \"Getting Started with Sequelize\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sequelize/sequelize\"\n  }), \"Sequelize\"), \" is a promise-based ORM for Node.js. Sequelize is easy to learn and has dozens of cool features like synchronization, association, validation, etc. It also has support for PostgreSQL, MySQL, MariaDB, SQLite, and MSSQL. I am assuming you have some form of SQL database service started on your machine. I am currently using MySQL.\"), mdx(\"h3\", null, \"Installation\"), mdx(\"p\", null, \"Sequelize is available via npm.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"$ npm install --save sequelize\\n\\n# And one of the following:\\n$ npm install --save pg pg-hstore\\n$ npm install --save mysql // For both mysql and mariadb dialects\\n$ npm install --save sqlite3\\n$ npm install --save tedious // MSSQL\\n\")), mdx(\"h3\", null, \"Setting up a Connection\"), mdx(\"p\", null, \"Sequelize does setup a connection between the rest api/application and your SQL database. To setup basic connection between the two:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const sequelize = new Sequelize('database', 'username', 'password', {\\n  host: 'localhost',\\n  dialect: 'mysql' | 'mariadb' | 'sqlite' | 'postgres' | 'mssql', //choose anyone between them\\n\\n  // To create a pool of connections\\n  pool: {\\n    max: 5,\\n    min: 0,\\n    idle: 10000\\n  },\\n\\n  // For SQLite only\\n  storage: 'path/to/database.sqlite'\\n})\\n\")), mdx(\"h3\", null, \"How do I setup my Sequelize Connection?\"), mdx(\"p\", null, \"For the sake brevity, I like to divide code into modules. After all, the Unix philosophy of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://amandeepmittal.github.io/blog/2017/04/05/The-Node-Way-Philosophy-of-a-Platform/\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"one program/module should do one thing\")), \" is major part of the philosophy behind writing code in JavaScript (and using Node.js as a server side platform) these days.\"), mdx(\"p\", null, \"I start with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.json\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.js\"), \" file in the root of my application/api folder in which I define the general constraints needed to setup the connection with database:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"development\\\": {\\n    \\\"username\\\": \\\"root\\\",\\n    \\\"password\\\": \\\"root\\\",\\n    \\\"database\\\": \\\"articles\\\",\\n    \\\"host\\\": \\\"localhost\\\",\\n    \\\"dialect\\\": \\\"mysql\\\"\\n  },\\n  \\\"test\\\": {\\n    \\\"username\\\": \\\"root\\\",\\n    \\\"password\\\": \\\"root\\\",\\n    \\\"database\\\": \\\"articles\\\",\\n    \\\"host\\\": \\\"127.0.0.1\\\",\\n    \\\"dialect\\\": \\\"mysql\\\"\\n  },\\n  \\\"production\\\": {\\n    \\\"username\\\": \\\"root\\\",\\n    \\\"password\\\": \\\"root\\\",\\n    \\\"database\\\": \\\"articles\\\",\\n    \\\"host\\\": \\\"127.0.0.1\\\",\\n    \\\"dialect\\\": \\\"mysql\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"You can do this in your\\xA0\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" file if you like to follow that pattern. For more info on this see \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[dotenv](https://www.npmjs.com/package/dotenv)\"), \".\"), mdx(\"p\", null, \"After defining the configuration variables, in my \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"models/\"), \" folder or where I define schema of tables in the database at application level, I create the connection in an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"'use strict'\\n\\nconst fs = require('fs')\\nconst path = require('path')\\nconst Sequelize = require('sequelize')\\nconst basename = path.basename(module.filename)\\nconst env = process.env.NODE_ENV || 'development'\\nconst config = require(__dirname + '/config.json')[env]\\nconst db = {}\\n\\nif (config.use_env_variable) {\\n  const sequelize = new Sequelize(process.env[config.use_env_variable])\\n} else {\\n  const sequelize = new Sequelize(\\n    config.database,\\n    config.username,\\n    config.password,\\n    config\\n  )\\n}\\n\\nfs.readdirSync(__dirname)\\n  .filter(file => {\\n    return (\\n      file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js'\\n    )\\n  })\\n  .forEach(file => {\\n    const model = sequelize['import'](path.join(__dirname, file))\\n    db[model.name] = model\\n  })\\n\\nObject.keys(db).forEach(modelName => {\\n  if (db[modelName].associate) {\\n    db[modelName].associate(db)\\n  }\\n})\\n\\nsequelize\\n  .authenticate()\\n  .then(() => {\\n    console.log('Connection has been established successfully.')\\n  })\\n  .catch(err => {\\n    console.log('Unable to connect to the database:', err)\\n  })\\n\\ndb.sequelize = sequelize\\ndb.Sequelize = Sequelize\\n\\n// Import Models such that I can use them in the api just by importing 'db'\\ndb.user = require('./user')(sequelize, Sequelize)\\ndb.admin = require('./admin')(sequelize, Sequelize)\\ndb.articles = require('./articles')(sequelize, Sequelize)\\n\\nmodule.exports = db\\n\")), mdx(\"p\", null, \"It\\u2019s important to notice that I am exposing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"db\"), \" object which contains every model/table schema definition. From now, I just have to import the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"db\"), \" object to apply operations on specific database tables using it.\"), mdx(\"p\", null, \"This setup can be auto-generated with the help of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sequelize/cli\"\n  }), \"Sequelize CLI\"), \" tool that helps in bootstrapping a new project in an effective manner (like the above) and handle database migrations directly from the terminal.\"), mdx(\"h3\", null, \"Conclusion\"), mdx(\"p\", null, \"Sequelize is feature rich ORM for Node.js. It has a documentation that at times may not provide direct solutions to your problems but there always Github issues for that. What I like about is its Promise based control flow. Coming from NoSQL background (and using MongoDB), understanding Sequelize really took less time. Most of the query based models are quite similar to that in MongoDB (especially the CRUD operations). I am looking for a brighter, more improved documentation and ease of support from Sequelize.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/hackernoon/getting-started-with-sequelize-for-nodejs-applications-2854c58ffb8c\"\n  }), \"Originally Published at Hackernoon.com\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"061fca42-f9c6-5ee9-82ce-64d87abfa244","prev":{"id":"c2423c5f-a36c-5636-b393-a94ee5cabdad","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"Often at times, I find my self struggling with Sequelize to find a direct answer for my query. Recently, I have been working on a fullstack application in which there was a basic requirement of paginating results from backend (REST API) to the…","fields":{"title":"How to paginate records in MySQL using Sequelize and Nodejs","slug":"paginate-records-in-mysql-using-sequelize-and-nodejs","date":"2017-06-20T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"f85f2c84-c83d-5973-855c-8b276fbb05e5","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"ESLint is an open source JavaScript linting utility that help you overcome developer errors as JavaScript is loosely-typed language. There are quite a few options such as JSHint and JSCS in Javascript community for code linting and this post doesn’t…","fields":{"title":"How to use ESLint in Node.js Applications?","slug":"how-to-use-eslint-in-node-js-applications","date":"2017-04-28T00:00:00.000Z"},"code":{"scope":""}}}}}