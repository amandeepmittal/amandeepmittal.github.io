{"componentChunkName":"component---src-templates-post-js","path":"/node-js-twitter-bot-tutorial-part-2","webpackCompilationHash":"c3a562291cd8e443a353","result":{"data":{"site":{"siteMetadata":{"title":"Aman Mittal - Fullstack Developer","description":"Aman Mittal - Developer and Technical writer.","author":{"name":"Aman Mittal"},"keywords":["Fullstack Developer"]}},"mdx":{"frontmatter":{"title":"Writing a Node.js Twitter Bot Part 2","date":"December 15, 2016","author":"Aman Mittal","banner":null,"slug":"node-js-twitter-bot-tutorial-part-2","keywords":null},"code":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"node-js-twitter-bot-tutorial-part-2\",\n  \"date\": \"2016-12-15T00:00:00.000Z\",\n  \"title\": \"Writing a Node.js Twitter Bot Part 2\",\n  \"categories\": [\"nodejs\"],\n  \"description\": \"---\",\n  \"published\": true,\n  \"author\": \"Aman Mittal\",\n  \"banner\": null\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/800/1*N32NxcCDKDDjlc56ghcsaA.jpeg\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"If you read the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.risingstack.com/node-js-twitter-bot-tutorial/\"\n  }), \"first part of my tutorial\"), \", you already know how to make a Twitter Bot with Node.js that retweets and favorites tweets using the Twitter API.\"), mdx(\"p\", null, \"In the second part of the Twitter Bot tutorial, we will continue to extend our Bot by adding functionality that will tweet back to any Twitter user who follows our bot.\"), mdx(\"p\", null, \"Before starting this, make sure your directory structure includes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"package.json\"), \" (the configuration file for our Node.js application)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"config.js\"), \" (the configuration file of our Twitter application that contains both consumer and access key & tokens)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"bot.js\"), \" (our main application file)\")), mdx(\"p\", null, \"The representation would be:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"root/project-name\\n|- bot.js\\n|- config.js\\n|- package.json\\n\")), mdx(\"p\", null, \"You can take a look at the complete bot.js file from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.risingstack.com/node-js-twitter-bot-tutorial/\"\n  }), \"the first part of this tutorial\"), \".\"), mdx(\"p\", null, \"Also, make sure you have the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/search?q=twit\"\n  }), \"twit\"), \" npm module installed.\"), mdx(\"h2\", null, \"How to make a Twitter bot that replies\"), mdx(\"p\", null, \"After setting up the dependencies and loading/requiring the configuration related to our application, we are going to develop a functionality that is going to tweet back to a Twitter user who follows the Bot's Twitter Handler.\"), mdx(\"p\", null, \"We are going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dev.twitter.com/streaming/overview\"\n  }), \"Twitter's Streaming API\"), \" to interact with our followers.\"), mdx(\"h2\", null, \"Setting up the Streams API\"), mdx(\"p\", null, \"First, we have to set up a stream. Fortunately, the third party npm dependency \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"twit\"), \" provides an API function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".stream()\"), \" to do this task.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// Use Streams API for interacting with a USER\\n// set up a user stream\\n\\nvar stream = Twitter.stream('user')\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".stream()\"), \" keeps the connection alive, and returns an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"EventEmitter\"), \".\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"twit\"), \" provides a list of stream events to listen on, such as 'follow', 'unfollow', 'favorite' and 'unfavorite'.\"), mdx(\"p\", null, \"Right now we are only interested in the follow event, however the basic syntax is similar to every event.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// when someone follows\\nstream.on('follow', followed)\\n\")), mdx(\"p\", null, \"When a user follows our Twitter Bot, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"follow\"), \" event will trigger the callback associated with it, in our case \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"followed\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// ...trigger the callback\\nfunction followed(event) {\\n    console.log('Follow Event is running');\\n    //get user's twitter handler (screen name)\\n    var name = event.source.name,\\n    var screenName = event.source.screen_name;\\n    // function that replies back to the user who followed\\n    tweetNow('@' + screenName + ' Thank you for the follow up.');\\n}\\n\")), mdx(\"h2\", null, \"Replying with tweetnow()\"), mdx(\"p\", null, \"In the followed callback, we pass an event argument which gets the Twitter handle and the screen name of the user. In the last line, we invoke a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tweetnow()\"), \" function that replies back to the user who followed our bot.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tweetnow()\"), \" function takes a string as an argument and updates our bots status. In other terms, it tweets by using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".post()\"), \"function provided by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"twit\"), \" API to post to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"statuses/update\"), \"Twitter API endpoint.\"), mdx(\"p\", null, \"This endpoint gets called whenever you tweet from your Twitter account.\"), mdx(\"p\", null, \"If you noticed in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.risingstack.com/node-js-twitter-bot-tutorial/\"\n  }), \"previous tutorial\"), \" when retweeting or to favorite a tweet, we used \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".post()\"), \" to update our status.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"function tweetNow(tweetTxt) {\\n  var tweet = {\\n    status: tweetTxt\\n  }\\n  Twitter.post('statuses/update', tweet, function(err, data, response) {\\n    if (err) {\\n      console.log('Error in Replying')\\n    } else {\\n      console.log('Gratitude shown successfully')\\n    }\\n  })\\n}\\n\")), mdx(\"p\", null, \"Unlike in the previous tutorial, we don't need JavaScripts Timer function this time, since we are using the Streaming API which helps to keep the connection alive.\"), mdx(\"p\", null, \"Here comes the complete code of our bot:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// Use Streams API for interacting with a USER ==========\\n// set up a user stream\\n\\nvar stream = Twitter.stream('user')\\n\\n// FOLLOW-Reply BOT ===========================\\n\\n// when someone follows\\nstream.on('follow', followed)\\n\\n// ...trigger the callback\\nfunction followed(event) {\\n  console.log('Follow Event is running')\\n  //get their twitter handler (screen name)\\n  var name = event.source.name,\\n    screenName = event.source.screen_name\\n  // function that replies back to the user who followed\\n  tweetNow('@' + screenName + ' Thank you for the follow up.')\\n}\\n\\n// function definition to tweet back to user who followed\\nfunction tweetNow(tweetTxt) {\\n  var tweet = {\\n    status: tweetTxt\\n  }\\n  Twitter.post('statuses/update', tweet, function(err, data, response) {\\n    if (err) {\\n      console.log('Error in Replying')\\n    } else {\\n      console.log('Gratitude shown successfully')\\n    }\\n  })\\n}\\n\")), mdx(\"h2\", null, \"Running the Twitter Bot\"), mdx(\"p\", null, \"To run this bot, go to your terminal:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"node bot.js\\n\")), mdx(\"p\", null, \"To avoid this monotonous process, you can use npm scripts or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nodemon\"), \". You can also deploy this app on Heroku for a continuous deployment.\"), mdx(\"p\", null, \"If you are planning to deploy on Heroku, make sure to include a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Procfile\"), \" in the root of your directory structure and add the following line to the file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"worker: node bot.js\\n\")), mdx(\"p\", null, \"If you are using npm scripts, make sure you edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scripts\"), \" attribute in the\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"node bot.js\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"Then to run from terminal:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"$ npm start\\n\")), mdx(\"h2\", null, \"Next up\"), mdx(\"p\", null, \"To do further smart things with your bot, go and check out the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/twit\"\n  }), \"twit documentation\"), \" for other RESTful API methods and Streaming API events.\"), mdx(\"p\", null, \"If you are interested in Twitter Bots, check \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://botwiki.org/bots/twitterbots/\"\n  }), \"Botwiki.org\"), \" - as they have the vast collection of Twitter Bots in different programming languages.\"), mdx(\"p\", null, \"The sole purpose of Bot as a web application is automation. For example, when I created my first Twitter Bot \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/nodejstweet\"\n  }), \"@nodejstweets\"), \", the whole idea was to remain up to date with the most recent happenings.\"), mdx(\"p\", null, \"You can do a lot of things with a Twitter Bot, whether for your own sole purpose or to solve a purpose for a community. See \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://twitter.com/@_100DaysOfCode\"\n  }), \"@100DaysOfCode\"), \" as a great example.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", {\n    href: \"https://community.risingstack.com/how-to-make-a-twitter-bot-with-node-js/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, \"Originally Published at RisingStack.com\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"ad735660-e505-5120-8f97-0da166fa2421","prev":{"id":"c3e4b064-dc6d-5425-89f9-e3fa6a891425","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"Yes, I use  Bower  to maintain front-end dependencies, mostly for my side projects. Whatever you say, Bower is good and I am too anxious to mess with npm dependencies for front-end development. Plus, I feel that maintaining front-end dependencies…","fields":{"title":"Using Bower With Heroku","slug":"using-bower-with-heroku","date":"2016-12-29T00:00:00.000Z"},"code":{"scope":""}},"next":{"id":"8731c3f1-d96d-5198-a9f5-c780231c9213","parent":{"name":"index","sourceInstanceName":"blog"},"excerpt":"Earlier this week,  Rising Stack Community  published the second of tutorial on Building a Twitter Bot with NodeJS. Some of you may have read the first part here  on Medium  ( published by Hackernoon )  while others might have gone through the first…","fields":{"title":"How to make a Twitter Bot with NodeJS","slug":"how-to-make-a-twitter-bot-with-nodejs","date":"2016-12-15T00:00:00.000Z"},"code":{"scope":""}}}}}